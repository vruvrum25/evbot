Файлик, тут просто пишу для себя чтобы было удобно, что реализовано, какие данные можно брать из data:

1) atr60_btc/eth/exp
2) Price_btc/eth/xrp
3) и т.д



Так же для активных позиций нужно реализовать тут папку websocket, чтобы не долбить апи миллионом запросов и лимит словишь и долго будет.


Просто создать вебсокет который смотрим активные позиции и опять таки стратегия сможет взять отсюда данные по открытым позициям уже






Итог
Видишь, как красиво получается? Модули перестали зависеть друг от друга напрямую. Они общаются только через Шину событиями.

MarketStateProducer -> кричит в шину "Рынок есть!"

WebSocketAdapter -> услышал, подписался, начал кричать в шину "Цена 0.55!"

Strategy -> услышала цену, начала думать.

Это очень гибко. Захочешь добавить Биткоин? Просто запустишь еще один MarketStateProducer для BTC, и всё остальное заработает само.
