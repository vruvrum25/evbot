1) Поиск рынка - за это отвечает gamma он без апи, просто публичный. (можно проверять запросы и ответы в браузере)

Работают такие запросы:

(closed=false - означает что будут только активные сейчас рынки, которые не закрылись ещё)

1 - Поиск по тегу из ссылки события

https://gamma-api.polymarket.com/events?slug=eth-updown-15m-1762786800&closed=false

https://gamma-api.polymarket.com/events?slug=eth-updown-15m-1762786800


2 - Поиск вообще всех событий

https://gamma-api.polymarket.com/events?closed=false

Ну и потом самому фильтировать из них события которые нужные

СООТВЕСТВЕННО ПОТОМ ДЛЯ СТРАТЕГИИ НУЖНО БУДЕТ НАПИСАТЬ СТАНДАРТЫ ПАРАМЕТРОВ КОТОРЫЕ МОЖНО ИСПОЛЬЗОВАТЬ, допустим стандарт slag - и пишешь название конкретного рынка, если хочешь чтобы только с ним работал / или пишешь full тогда весь рынок вообще или как то ещё







Дата - Полимаркет.  Это папка где все данные сырые с полимаркета (какие прогнозы, какая цена эфира, какя цена ставки сейчас и т.д)


Специально разделил data папки - чтобы они не были в самой стратегии и всегда можно было легко написать новую стратегию - просто обращаясь к сырым данным которые отсюда выдаются стратегии (хочешь цену эфириума - обратился сюда из стратегии и получил)


Пока что не знаю как точно правильно реализовать, понятно одно - что точно нужен вебсокет и нужно просто передавать данные эти сырые, или не сохранять их вообще или писать строчками в редис и стратегия будет брать из редиса? Но не замедлит ли это?



Что делают файлы:

1) Маркет стейт - просто получает id события нужного тебе и запоминает его в памяти (маркет фаиндер - ищет это событие по запросу маркет стейт), такое разделение нужно так как стейт запоминает в памяти чтобы не делать 100 раз запрос к api и узнавать тоже самое. - Спросил из стратегии рынок эфира 15 минут и он выдал id актуального рынка

2) Клиент.py это подключение к clob (api который и выдаёт а какое id у рынка и т.д) и к websocket (api который работает как тунель - всегда шлёт тебе запрос и быстрее чем api, не нужно делать запрос каждую секунду какая цена ставки сейчас, он сам шлёт тебе каждый раз как изменяется / единственное нужно иногда слать ему ping pong чтобы он знал что мы тут ещё и не сбрасывал тунель)




Итог
Видишь, как красиво получается? Модули перестали зависеть друг от друга напрямую. Они общаются только через Шину событиями.

MarketStateProducer -> кричит в шину "Рынок есть!"

WebSocketAdapter -> услышал, подписался, начал кричать в шину "Цена 0.55!"

Strategy -> услышала цену, начала думать.

Это очень гибко. Захочешь добавить Биткоин? Просто запустишь еще один MarketStateProducer для BTC, и всё остальное заработает само.
